
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="-1" />
    <meta http-equiv="refresh" content="0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Trade Buddy - Professional Trading Journal</title>
    <meta name="description" content="Professional trading journal and analysis platform for serious traders" />
    <meta name="author" content="Trade Buddy" />
    <meta property="og:image" content="/tradebuddy-logo.svg" />
    
    <!-- Favicon and Icons -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" href="/tradebuddy-logo.svg" />
    <script>
      // NUCLEAR CACHE ANNIHILATOR - FORCE NEW BUNDLE LOAD
      (() => {
        console.log('‚ò¢Ô∏è NUCLEAR CACHE ANNIHILATOR ACTIVATED');
        
        // ALWAYS force reload for index-DUzU8MtJ.js
        const checkOldBundle = () => {
          const scripts = Array.from(document.scripts);
          const hasOldBundle = scripts.some(script => 
            script.src && script.src.includes('index-DUzU8MtJ.js')
          );
          
          if (hasOldBundle) {
            console.log('üö® OLD BUNDLE DETECTED - NUCLEAR RELOAD');
            // Nuclear option: destroy everything and reload
            try {
              localStorage.clear();
              sessionStorage.clear();
              if (window.caches) {
                caches.keys().then(keys => keys.forEach(key => caches.delete(key)));
              }
              if (navigator.serviceWorker) {
                navigator.serviceWorker.getRegistrations().then(regs => 
                  regs.forEach(reg => reg.unregister())
                );
              }
            } catch (e) {}
            
            // Force reload with nuclear parameters
            const nuclear = Date.now() + Math.random();
            window.location.href = window.location.href.split('?')[0] + '?nuclear=' + nuclear;
            return true;
          }
          return false;
        };
        
        // Check immediately and every 100ms until new bundle loads
        if (!checkOldBundle()) {
          const interval = setInterval(() => {
            if (checkOldBundle() || document.readyState === 'complete') {
              clearInterval(interval);
            }
          }, 100);
        }
      })();
    </script>
  </head>

  <body>
    <div id="root"></div>
    <!-- IMPORTANT: DO NOT REMOVE THIS SCRIPT TAG OR THIS VERY COMMENT! -->
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    <script type="module" src="/src/main.tsx"></script>
    <script>
      // FORCE NEW BUNDLE LOAD - BYPASS ALL CACHES
      console.log('üö® FORCING NEW BUNDLE LOAD');
      
      // Check if we're loading the old bundle
      const scripts = document.querySelectorAll('script[src*="index-"]');
      scripts.forEach(script => {
        const src = script.src;
        if (src.includes('index-DUzU8MtJ.js')) {
          console.log('‚ùå OLD BUNDLE DETECTED - FORCING RELOAD');
          // Force reload with cache-busting
          const timestamp = Date.now();
          const random = Math.random();
          const newUrl = window.location.href.split('?')[0] + '?force=' + timestamp + '&r=' + random;
          window.location.replace(newUrl);
        } else {
          console.log('‚úÖ NEW BUNDLE LOADED:', src);
        }
      });
    </script>
  </body>
</html>
